# Samsung TV Configuration Guide

This project uses a centralized configuration system to manage all Samsung TV connection parameters. All hardcoded IP addresses and app package IDs have been removed in favor of configuration-based management.

## üìã Configuration File

The main configuration is stored in `.samsung-tv.conf` in the project root:

```bash
# Samsung TV Configuration
# This file is automatically generated by the Samsung TV Test Runner
# You can modify these values or override them with environment variables

TV_IP="192.168.4.31"
TV_PORT="26101"
RC_TOKEN="58997311"
APPIUM_PORT="4723"
SDB_PATH="/Users/asad.zaman/tizen-studio/tools/sdb"
APP_PACKAGE="gGnYSxMq0L.MLBTVSTG"

# Auto-discovery settings
AUTO_DISCOVER_TV="true"
NETWORK_SCAN_TIMEOUT=10

# Last updated: $(date)
```

## üîß Configuration Parameters

| Parameter | Description | Default | Required |
|-----------|-------------|---------|----------|
| `TV_IP` | Samsung TV IP address | Auto-discovered | ‚úÖ Yes |
| `TV_PORT` | Samsung TV SDB port | `26101` | ‚úÖ Yes |
| `RC_TOKEN` | Remote control token | `58997311` | ‚úÖ Yes |
| `APPIUM_PORT` | Appium server port | `4723` | No |
| `SDB_PATH` | Path to SDB executable | Auto-detected | No |
| `APP_PACKAGE` | MLB app package ID | `gGnYSxMq0L.MLBTVSTG` | ‚úÖ Yes |
| `AUTO_DISCOVER_TV` | Enable TV auto-discovery | `true` | No |
| `NETWORK_SCAN_TIMEOUT` | Discovery timeout (seconds) | `10` | No |

## üöÄ Configuration Methods

### 1. Automatic Discovery (Recommended)
```bash
# Auto-discover and configure Samsung TV
./run discover
```

### 2. Manual Configuration
Edit `.samsung-tv.conf` directly:
```bash
# Edit configuration file
nano .samsung-tv.conf

# Or use your preferred editor
code .samsung-tv.conf
```

### 3. Environment Variables
Override configuration with environment variables:
```bash
# Set environment variables
export SAMSUNG_TV_IP="192.168.1.100"
export SAMSUNG_TV_PORT="26101"
export SAMSUNG_APP_PACKAGE="gGnYSxMq0L.MLBTVSTG"

# Run tests with overrides
./run test @loginTest
```

## üîÑ Configuration Loading Order

The system loads configuration in this priority order:

1. **Environment Variables** (highest priority)
   - `SAMSUNG_TV_IP`
   - `SAMSUNG_TV_PORT`
   - `SAMSUNG_TV_RC_TOKEN`
   - `SAMSUNG_APP_PACKAGE`

2. **Configuration File** (`.samsung-tv.conf`)
   - Loaded automatically by all scripts
   - Created/updated by discovery process

3. **Default Values** (lowest priority)
   - Built-in fallback values
   - Used when no other configuration exists

## üìÅ Files Using Configuration

All scripts now use the centralized configuration:

### Main Scripts
- `./run` - Main test runner
- `./reset-connection.sh` - Connection recovery
- `./reset-sdb.sh` - SDB reset utility

### Configuration Files
- `wdio.conf.js` - WebDriverIO configuration
- `.samsung-tv.conf` - Main configuration file

### Test Files
All test files inherit configuration through environment variables set by the main runner.

## üõ†Ô∏è Configuration Validation

The system validates configuration before running tests:

```bash
# Check current configuration
./run status

# Validate and show configuration
./run recover check
```

### Required Configuration Check
If required parameters are missing:
```bash
‚ùå TV_IP not configured in .samsung-tv.conf
Please set TV_IP in the configuration file or run './run discover'
```

## üîç Troubleshooting Configuration

### Problem: No TV IP configured
```bash
# Solution 1: Auto-discover
./run discover

# Solution 2: Manual configuration
echo 'TV_IP="192.168.1.100"' >> .samsung-tv.conf

# Solution 3: Environment variable
export SAMSUNG_TV_IP="192.168.1.100"
```

### Problem: Wrong app package
```bash
# Update configuration file
sed -i 's/APP_PACKAGE=".*"/APP_PACKAGE="your.app.package"/' .samsung-tv.conf

# Or use environment variable
export SAMSUNG_APP_PACKAGE="your.app.package"
```

### Problem: Connection issues
```bash
# Verify configuration
./run recover check

# Reset with current configuration
./run recover quick
```

## üîê Security Considerations

### Configuration File Security
- The `.samsung-tv.conf` file contains sensitive information
- Consider adding it to `.gitignore` for shared repositories
- Use environment variables in CI/CD environments

### Environment Variables
```bash
# Secure way to set variables in CI/CD
export SAMSUNG_TV_IP="${SECRET_TV_IP}"
export SAMSUNG_TV_RC_TOKEN="${SECRET_RC_TOKEN}"
export SAMSUNG_APP_PACKAGE="${SECRET_APP_PACKAGE}"
```

## üìù Configuration Examples

### Development Environment
```bash
# .samsung-tv.conf for development
TV_IP="192.168.1.100"
TV_PORT="26101"
RC_TOKEN="12345678"
APP_PACKAGE="gGnYSxMq0L.MLBTVSTG"
AUTO_DISCOVER_TV="true"
```

### CI/CD Environment
```bash
# Use environment variables in CI/CD
export SAMSUNG_TV_IP="10.0.0.100"
export SAMSUNG_TV_PORT="26101"
export SAMSUNG_TV_RC_TOKEN="${CI_RC_TOKEN}"
export SAMSUNG_APP_PACKAGE="gGnYSxMq0L.MLBTVSTG"
export AUTO_DISCOVER_TV="false"
```

### Multiple TV Setup
```bash
# TV 1 configuration
export SAMSUNG_TV_IP="192.168.1.100"
./run test @loginTest

# TV 2 configuration  
export SAMSUNG_TV_IP="192.168.1.101"
./run test @loginTest
```

## üéØ Best Practices

1. **Use Auto-Discovery**: Run `./run discover` to automatically configure
2. **Environment Variables for CI/CD**: Use env vars in automated environments
3. **Validate Configuration**: Always run `./run status` before testing
4. **Backup Configuration**: Keep a backup of working `.samsung-tv.conf`
5. **Security**: Don't commit sensitive configuration to version control

## üîÑ Migration from Hardcoded Values

If you're migrating from hardcoded values:

1. **Remove old hardcoded references**
2. **Run discovery**: `./run discover`
3. **Validate configuration**: `./run status`
4. **Test functionality**: `./run test @loginTest`

The system now provides complete flexibility while maintaining security and ease of use!
